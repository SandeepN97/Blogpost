#!/usr/bin/env bash
# Helper script to start the frontend and open it in the browser.

set -e

PORT=${PORT:-3000}
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
cd "$SCRIPT_DIR/frontend" || exit 1

# Use a custom start command if FRONTEND_CMD is set, otherwise serve statically
START_CMD=${FRONTEND_CMD:-"python -m http.server $PORT"}

echo "Starting frontend with: $START_CMD"

# Run the server in the background so we can open the browser
bash -c "$START_CMD" &
SERVER_PID=$!

sleep 2
URL="http://localhost:$PORT"
if command -v xdg-open >/dev/null 2>&1; then
  xdg-open "$URL"
elif command -v open >/dev/null 2>&1; then
  open "$URL"
else
  echo "Open $URL in your browser"
fi

wait $SERVER_PID

